<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/assets/vendor/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link rel="stylesheet" href="/assets/vendor/css/owl.carousel.min.css">
    <link rel="stylesheet" href="/assets/vendor/css/owl.theme.default.css">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.7/css/jquery.dataTables.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/buttons/2.4.2/css/buttons.dataTables.min.css">
    <link rel="stylesheet" href="/css/style.css">
    <title>Education Academy</title>
</head>

<body>


    <!--desktop menu area start -->
    <section class="nav-section  d-lg-flex  d-none ">
        <div class="logo">
            <a href="/"><img src="/assets/img/1.logo/ea-logo.png" alt=""></a>
            <a href="/"><span>Education Academy</span></a>
        </div>
        <div class="rightItems">

       
        <div class="nav-menu">
            <% commonData.menuItems.forEach(item=> { %>
                <div class="nav-menu-item">
                    <span>
                        <p>
                            <%= item.text %>
                        </p>
                        <% if (item.submenu && item.submenu.length> 0) { %>
                            &nbsp; <i class="bi bi-caret-down-fill"></i>
                            <% } %>
                    </span>
    
                    <div class=" d-dropdown-item">
                        <% if (item.submenu && item.submenu.length> 0) { %>
                            <% item.submenu.forEach(subItem=> { %>
    
    
                                <% if (subItem.submenu2 && subItem.submenu2.length> 0) { %>
                                    <div class="secondMenu">
                                        <span>
                                            <%= subItem.text %>
                                        </span>
                                        <div class="d-dropdown-item-1">
                                            <% subItem.submenu2.forEach(subItem2=> { %>
                                                <a href="/courseview/<%= subItem2.link %>">
                                                    <%= subItem2.text %>
                                                </a>
                                                <% }); %>
                                        </div>
                                    </div>
                                    <% } else { %>
    
                                        <a href="/courseview/<%= subItem.link %>">
                                            <%= subItem.text %>
                                        </a>
                                        <% } %>
    
    
                                            <% }); %>
                                                <% } %>
                    </div>
                </div>
                <% }); %>
        </div>
        <Button class="secondary-button " data-bs-toggle="modal" data-bs-target="#leadModal"><i
                class="bi bi-telephone-fill"></i> &nbsp; Call Back
        </Button>
    </div>
    </section>
    <!--desktop menu area end -->

    <!--mobile menu area start -->
    <section class="mobile-menu-area d-lg-none d-block ">
        <div class="container">
            <div class="row">
                <div class="col">
                    <div class="mobile-menu">
                        <div class="mobile-logo">
                            <a href="/"><img src="/assets/img/1.logo/ea-logo.png" alt=""></a>
                            <a href="/"><span>Education Academy</span></a>
                        </div>
                        <div class="mobile-menu-icon">
                            <i class="bi bi-list" data-bs-toggle="offcanvas" data-bs-target="#offcanvasExample"
                                aria-controls="offcanvasExample"></i>
                        </div>
                        <div class="offcanvas offcanvas-custom offcanvas-start" tabindex="-1" id="offcanvasExample"
                        aria-labelledby="offcanvasExampleLabel">
                        <div class="offcanvas-header offcanvas-custom-header">
                            <a href="index.html"><span class="offcanvas-title" id="offcanvasExampleLabel">Education
                                    Academy</span></a>
                            <i class="bi bi-x" data-bs-dismiss="offcanvas" aria-label="Close"></i>
                        </div>
                        <div class="offcanvas-body">
                            <div class="mobile-menu-items">
                                <% commonData.menuItems.forEach((item, index) => { %>
                                <div class="accordion" id="accordionExample<%= index %>">
                                    <div class="accordion-item custom-accordion-item">
                                        <h2 class="accordion-header custom-accordion-header" id="heading<%= index %>">
                                            <button class="accordion-button" type="button" data-bs-toggle="collapse"
                                                data-bs-target="#collapse<%= index %>" aria-expanded="true"
                                                aria-controls="collapse<%= index %>">
                                                <span><%= item.text %></span>
                                            </button>
                                        </h2>
                                        <div id="collapse<%= index %>" class="accordion-collapse collapse"
                                            aria-labelledby="heading<%= index %>" data-bs-parent="#accordionExample<%= index %>">
                                            <% if (item.submenu && item.submenu.length > 0) { %>
                                            <% item.submenu.forEach((subItem, subIndex) => { %>
                                            <div class="accordion-body custom-accordion-body">
                                                <div class="m-menu-item-1">
                                                    <% if(subItem.submenu2 && subItem.submenu2.length > 0){ %>
                                                    <span><%= subItem.text %></span>
                                                    <div class="m-menu-item-2">
                                                    <% subItem.submenu2.forEach((subItem2, subIndex2) => { %>
                                                        
                                                        <a href="/courseview/<%= subItem2.link %>"><i class="bi bi-arrow-down-right-square-fill"></i> &nbsp;<%= subItem2.text %></a>
                                                    
                                                    <% }); %>
                                                    </div>
                                                    <% } else{ %>
                                                        
                                                        <a href="/courseview/<%= subItem.link %>"><%= subItem.text %></a>
                                                    <% } %>
                                                </div>
                                            </div>
                                            <% }); %>
                                            <% } %>
                                        </div>
                                    </div>
                                </div>
                                <% }); %>
                                <button class="cta-button" data-bs-toggle="modal" data-bs-target="#leadModal">Join US</button>
                            </div>
                        </div>
                    </div>
                    
                </div>
            </div>
        </div>

    </section>
    <!--mobile menu area end -->



    <!-- lead capture form start -->
    <div class="modal lead-modal fade" id="leadModal" tabindex="-1" aria-labelledby="leadModalLabel" aria-hidden="true">
        <div class="modal-dialog ">
            <div class="modal-content counseling-modal-content ">
            
                <div class="modal-body">
                    <button type="button" class="btn-close formClose" data-bs-dismiss="modal" aria-label="Close"></button>

                    <div class="row">
                        <div class="col m-0 p-0">
                            <!-- forms -->

                            <div class="registerForm">
                                <div class="container">
                                    <div class="logo">
                                        <img src="/assets/img/1.logo/ea-logo.png" alt="">
                                    </div>
                                    <form action="/admin" method="POST" id="addRegisterForm">

                                        <div>
                                            <label for="firstName">Name</label> <br>
                                            <input id="firstName" name="firstName" placeholder="Enter First Name"
                                                type="text" required>
                                        </div>

                                        <div>
                                            <label for="email">Email</label> <br>
                                            <input id="email" name="email" placeholder="Enter Email" type="text"
                                                required>
                                        </div>

                                        <div>
                                            <label for="mobileNum">Mobile No</label> <br>
                                            <input id="mobileNum" placeholder="Enter Phone" name="mobileNum"
                                                type="number" required>
                                        </div>

                                        <div>
                                            <label for="Courses">Courses</label> <br>
                                            <input id="Courses" placeholder="Enter Phone" name="Courses" type="text"
                                                required>
                                        </div>

                                        <div>
                                            <label for="Address">Address</label> <br>
                                            <textarea style="width: 100%;" id="Address" placeholder="Enter Address"
                                                name="Address" required></textarea>
                                        </div>
                                        <div>
                                            <input type="submit" value="Submit "  class="exploreNow">
                                        </div>

                                    </form>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
                <!-- <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Submit</button>
            </div> -->
            </div>
        </div>
    </div>
    <!-- lead capture form end -->



    <script>
        
    // Custom email validation using regex
    $.validator.addMethod("customEmail", function (value, element) {
                // Modify the regular expression according to your needs
                return this.optional(element) || /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(value);
            }, "Please enter a valid email address");

  $("#addRegisterForm").validate({
      rules: {
          firstName: "required",
          email: {
                        required: true,
                        customEmail: true
                    },
          mobileNum: {
                        required: true,
                        number: true,
                        minlength: 10,
                        maxlength: 10
                    },
          Courses: "required",
          Address: "required",
      },
      messages: {
          firstName: "Please enter your first name",
          email: {
                        required: "Please enter your email address"
                    },
          mobileNum: {
                        required: "Please enter your mobile number",
                        number: "Please enter a valid number",
                        minlength: "Mobile number must be 10 digits",
                        maxlength: "Mobile number must be 10 digits"
                    },
          Courses: "Please enter the courses",
          Address: "Please enter your address",
      },
      
                errorPlacement: function (error, element) {
                    // Customize error placement if needed
                    error.insertAfter(element);
                },
      submitHandler:function(form ,event){
       
        event.preventDefault()
        // console.log($(form).serialize())
        $.ajax({
                type: "POST",
                url: "/admin",
                data: $(form).serialize(),
                success: function (data, status) {
                    console.log("DataReturn:", data);
                    console.log("Status:", status);

                    // Remove previous error messages
                    $('.error-message').remove();
                    $('.success').remove();

                    if (data.errors) {
                        data.errors.forEach(err => {
                            var inputName = err.path;
                            var errorMessage = err.msg;
                            $('[name="' + inputName + '"]').after('<div class="error-message">' + errorMessage + '</div>');
                        });
                    }

                    if (data.msg && status === "success") {
                        const message = data.msg;
                        console.log("message" , message)
                        // Check for specific messages related to email and phone duplication
                        if (message === "Email already exists") {
                            $('#addRegisterForm').append('<div class="error-message">' + message + '</div>');
                        } else if (message === "Mobile number already exists") {
                            $('#addRegisterForm').append('<div class="error-message">' + message + '</div>');
                        } else if (message === "Email and Mobile number already exist") {
                            // Handle the case where both email and mobile are duplicated
                            $('#addRegisterForm').append('<div class="error-message">' + message + '</div>');
                        } else {
                            // Display success message for other cases
                            $('#addRegisterForm').append('<h4 class="success">' + message + '</h4>');
                        }
                    }
                    // Additional logic after successful submission
                },
                error: function (xhr, status, error) {
                    console.error("Error:", error);
                }
            });

    }
  });

 

    </script>